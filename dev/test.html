<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Better Crowdmark Development Test Page</title>
    <meta name="description" content="A test page for developing the Better Crowdmark extension">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>

    <h1>
        Better Crowdmark Development Test Page
    </h1>


    <div class="BC-dev-test-input-container">
        <input type="file" id="test-input">
    </div>


    <div>
        <div>
            <h3>Parsed HTML</h3>
            <pre>
                <code id="parsed-html"></code>
            </pre>
        </div>

        <div>
            <h3>Rendered Image</h3>
            <img src="" id="rendered-img">
        </div>
    </div>

    <script>

        const getExtension = (filename) => {
            return filename.slice(filename.lastIndexOf(".")).toLowerCase();
        };

        const input = document.querySelector("#test-input");
        const img = document.querySelector("#rendered-img");

        input.onchange = (evt) => {
            console.log("FILE CHANGE EVT", evt);
            const file = evt.target?.files[0];
            console.log("FILE:", file);
            switch (getExtension(file.name)) {
                case ".jpeg":
                case ".jpg":
                case ".png":
                case ".gif":
                case ".webp":
                    img.src = URL.createObjectURL(file)
                    break;
                case ".pdf":
                    throw new Error("PDF Test Not implemented");
                    break;
                default:
                    throw new Error("Unsupported file");
            }
        }
    </script>


</body>

</html>